<!DOCTYPE html>
<html lang="es" data-theme="light">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>mwt.one â€” Sprint 3 Visual Spec para AG-03 Frontend</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   DESIGN TOKENS â€” from ENT_PLAT_DESIGN_TOKENS v1
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
:root {
  --navy: #013A57;
  --navy-light: #014A73;
  --navy-dark: #012B42;
  --mint: #75CBB3;
  --mint-soft: #E8F5F0;
  --mint-dark: #5BB89E;
  --ice: #A8D8EA;
  --ice-soft: #EDF6FB;

  --amber: #E8A23E;
  --amber-soft: #FFF3DC;
  --coral: #E85D5D;
  --coral-soft: #FDECEC;
  --success: #22A06B;
  --success-soft: #DCFFF0;

  --bg: #F8F9FB;
  --bg-alt: #F0F2F5;
  --surface: #FFFFFF;
  --surface-hover: #F5F6F8;
  --border: #E2E5EA;
  --border-strong: #C8CDD5;
  --divider: #ECEEF1;

  --text-primary: #013A57;
  --text-secondary: #3D4F5C;
  --text-tertiary: #7A8A96;
  --text-disabled: #B0BAC4;
  --text-inverse: #FFFFFF;

  --font-display: 'Plus Jakarta Sans', system-ui, sans-serif;
  --font-body: 'Plus Jakarta Sans', system-ui, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;

  --space-1:4px; --space-2:8px; --space-3:12px; --space-4:16px;
  --space-5:20px; --space-6:24px; --space-8:32px; --space-10:40px;

  --radius-sm:4px; --radius-md:6px; --radius-lg:8px;
  --radius-xl:12px; --radius-2xl:16px; --radius-full:9999px;

  --shadow-sm: 0 1px 3px rgba(1,58,87,.06), 0 1px 2px rgba(1,58,87,.04);
  --shadow-md: 0 4px 12px rgba(1,58,87,.08), 0 2px 4px rgba(1,58,87,.04);
  --shadow-lg: 0 12px 32px rgba(1,58,87,.12), 0 4px 8px rgba(1,58,87,.06);

  --transition-fast: 150ms ease-out;
  --transition-normal: 200ms ease-out;

  --sidebar-w: 240px;
  --sidebar-collapsed: 64px;
  --header-h: 56px;
}

/* â•â•â• DARK THEME â•â•â• */
[data-theme="dark"] {
  --bg: #0B1929;
  --bg-alt: #0E1E30;
  --surface: #0F2337;
  --surface-hover: #132D47;
  --border: #1E3A54;
  --border-strong: #2A4D6B;
  --divider: #172E45;

  --text-primary: #F1F5F9;
  --text-secondary: #94A3B8;
  --text-tertiary: #5A6E82;
  --text-disabled: #3A4F63;
  --text-inverse: #0B1929;

  --shadow-sm: 0 1px 3px rgba(0,0,0,.3), 0 1px 2px rgba(0,0,0,.2);
  --shadow-md: 0 4px 12px rgba(0,0,0,.4), 0 2px 4px rgba(0,0,0,.2);
  --shadow-lg: 0 12px 32px rgba(0,0,0,.5), 0 4px 8px rgba(0,0,0,.3);

  /* Dark: Navy sidebar goes deeper */
  --navy: #013A57;
  --navy-light: #1A5A7A;
  --navy-dark: #060F1A;

  /* Dark: Mint stays vibrant, becomes interactive primary */
  --mint: #75CBB3;
  --mint-soft: rgba(117,203,179,.12);
  --mint-dark: #5BB89E;
  --ice-soft: rgba(168,216,234,.08);

  /* Dark: Semantic colors adjust */
  --amber: #FFB347;
  --amber-soft: rgba(255,179,71,.12);
  --coral: #FF6B72;
  --coral-soft: rgba(255,107,114,.12);
  --success: #75CBB3;
  --success-soft: rgba(117,203,179,.12);
}

/* Dark: sidebar goes darker than surface */
[data-theme="dark"] .sidebar { background: #060F1A; }
[data-theme="dark"] .sidebar-brand { border-bottom-color: rgba(255,255,255,.06); }
[data-theme="dark"] .nav-item { color: rgba(255,255,255,.5); }
[data-theme="dark"] .nav-item:hover { background: rgba(255,255,255,.06); color: rgba(255,255,255,.8); }
[data-theme="dark"] .nav-item.active { background: rgba(117,203,179,.08); color: #F1F5F9; }
[data-theme="dark"] .sidebar-footer { border-top-color: rgba(255,255,255,.06); }

/* Dark: badges adjust */
[data-theme="dark"] .badge-mint { background: rgba(117,203,179,.15); color: #75CBB3; }
[data-theme="dark"] .badge-amber { background: rgba(255,179,71,.15); color: #FFB347; }
[data-theme="dark"] .badge-coral { background: rgba(255,107,114,.15); color: #FF6B72; }
[data-theme="dark"] .badge-navy { background: rgba(168,216,234,.1); color: #A8D8EA; }
[data-theme="dark"] .badge-gray { background: rgba(255,255,255,.06); color: var(--text-secondary); }
[data-theme="dark"] .badge-success { background: rgba(117,203,179,.15); color: #75CBB3; }

/* Dark: buttons flip â€” primary becomes Mint on Navy */
[data-theme="dark"] .btn-primary { background: var(--mint); color: var(--navy); }
[data-theme="dark"] .btn-primary:hover { background: var(--mint-dark); }
[data-theme="dark"] .btn-secondary { background: var(--surface); color: var(--text-primary); border-color: var(--border); }
[data-theme="dark"] .btn-secondary:hover { background: var(--surface-hover); border-color: var(--border-strong); }
[data-theme="dark"] .btn-danger { background: #FF6B72; }
[data-theme="dark"] .btn-danger:hover { background: #E85D5D; }

/* Dark: table rows */
[data-theme="dark"] .data-table th { color: var(--text-tertiary); border-bottom-color: var(--border); }
[data-theme="dark"] .data-table th:hover { color: var(--text-primary); }
[data-theme="dark"] .data-table td { border-bottom-color: var(--divider); }
[data-theme="dark"] .data-table tr:nth-child(even) td { background: var(--bg-alt); }
[data-theme="dark"] .data-table tr:hover td { background: var(--surface-hover); }
[data-theme="dark"] .data-table .ref { color: #A8D8EA; }
[data-theme="dark"] .data-table .ref:hover { color: var(--mint); }

/* Dark: inputs */
[data-theme="dark"] .login-card { background: var(--surface); }
[data-theme="dark"] .login-card .brand h1 { color: var(--text-primary); }
[data-theme="dark"] .login-card label { color: var(--text-secondary); }
[data-theme="dark"] .login-card input { background: var(--bg); border-color: var(--border); color: var(--text-primary); }
[data-theme="dark"] .login-card input:focus { border-color: var(--mint); box-shadow: 0 0 0 3px rgba(117,203,179,.15); }
[data-theme="dark"] .login-card .btn-login { background: var(--mint); color: var(--navy); }
[data-theme="dark"] .login-card .btn-login:hover { background: var(--mint-dark); }

/* Dark: login gradient */
[data-theme="dark"] .login-wrap { background: linear-gradient(135deg, #060F1A 0%, #0B1929 60%, #000 100%); }

/* Dark: spec notes */
[data-theme="dark"] .spec-note { background: rgba(232,162,62,.08); border-color: rgba(232,162,62,.25); color: #FFB347; }

/* Dark: modal */
[data-theme="dark"] .modal { background: var(--surface); }
[data-theme="dark"] .modal h3 { color: var(--text-primary); }
[data-theme="dark"] .modal p { color: var(--text-secondary); }
[data-theme="dark"] .modal textarea { background: var(--bg); border-color: var(--border); color: var(--text-primary); }

/* Dark: filter selects */
[data-theme="dark"] .filter-select { background: var(--surface); border-color: var(--border); color: var(--text-primary); }

/* Dark: misc */
[data-theme="dark"] .main-header { background: var(--surface); border-bottom-color: var(--border); }
[data-theme="dark"] .cost-total { background: var(--bg-alt); border-top-color: var(--border); }
[data-theme="dark"] .timeline-node.future { border-color: var(--border-strong); color: var(--text-disabled); }
[data-theme="dark"] .timeline-line.future { border-top-color: var(--border-strong); }
[data-theme="dark"] .pagination .pages button { background: var(--surface); border-color: var(--border); color: var(--text-primary); }
[data-theme="dark"] .pagination .pages button.active-page { background: var(--mint); color: var(--navy); border-color: var(--mint); }

/* â•â•â• THEME TRANSITION â•â•â• */
body, .sidebar, .main-header, .surface, .stat-card, .panel, .detail-section,
.timeline-wrap, .actions-panel, .login-card, .modal, .badge, .btn {
  transition: background var(--transition-normal), color var(--transition-normal), border-color var(--transition-normal), box-shadow var(--transition-normal);
}

* { margin:0; padding:0; box-sizing:border-box; }
body { font-family: var(--font-body); background: var(--bg); color: var(--text-primary); font-size: 14px; line-height: 1.5; -webkit-font-smoothing: antialiased; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SPEC NAVIGATION (top bar to switch views)
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.spec-nav {
  position: sticky; top: 0; z-index: 1000;
  background: var(--navy); color: var(--text-inverse);
  display: flex; align-items: center; gap: 8px;
  padding: 10px 20px;
  border-bottom: 3px solid var(--mint);
  font-size: 13px;
}
.spec-nav .logo { font-weight: 800; font-size: 16px; letter-spacing: -.5px; margin-right: 16px; }
.spec-nav .logo span { color: var(--mint); }
.spec-nav button {
  background: transparent; border: 1px solid rgba(255,255,255,.2); color: var(--text-inverse);
  padding: 6px 14px; border-radius: var(--radius-full); cursor: pointer;
  font-family: var(--font-body); font-size: 12px; font-weight: 600;
  transition: all var(--transition-fast);
}
.spec-nav button:hover { background: rgba(255,255,255,.1); border-color: rgba(255,255,255,.4); }
.spec-nav button.active { background: var(--mint); color: var(--navy); border-color: var(--mint); }
.spec-nav .badge { background: var(--coral); color: white; font-size: 10px; padding: 2px 8px; border-radius: var(--radius-full); font-weight: 700; margin-left: auto; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN CONTAINER
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.screen { display: none; }
.screen.active { display: block; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 0: LOGIN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.login-wrap {
  min-height: calc(100vh - 50px);
  display: flex; align-items: center; justify-content: center;
  background: linear-gradient(135deg, var(--navy) 0%, var(--navy-dark) 60%, #001824 100%);
}
.login-card {
  background: var(--surface); border-radius: var(--radius-2xl);
  padding: 48px 40px; width: 380px; box-shadow: var(--shadow-lg);
}
.login-card .brand { text-align: center; margin-bottom: 32px; }
.login-card .brand h1 { font-size: 28px; font-weight: 800; color: var(--navy); letter-spacing: -1px; }
.login-card .brand h1 span { color: var(--mint); }
.login-card .brand p { color: var(--text-tertiary); font-size: 13px; margin-top: 4px; }
.login-card label { display: block; font-size: 12px; font-weight: 600; color: var(--text-secondary); margin-bottom: 6px; margin-top: 16px; }
.login-card input {
  width: 100%; padding: 10px 14px; border: 1.5px solid var(--border); border-radius: var(--radius-lg);
  font-family: var(--font-body); font-size: 14px; color: var(--text-primary);
  transition: border var(--transition-fast);
  outline: none;
}
.login-card input:focus { border-color: var(--mint); box-shadow: 0 0 0 3px var(--mint-soft); }
.login-card .btn-login {
  width: 100%; margin-top: 24px; padding: 12px; border: none; border-radius: var(--radius-lg);
  background: var(--navy); color: white; font-size: 14px; font-weight: 700;
  cursor: pointer; transition: background var(--transition-fast);
}
.login-card .btn-login:hover { background: var(--navy-light); }
.login-card .footnote { text-align: center; margin-top: 16px; font-size: 11px; color: var(--text-disabled); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LAYOUT: SIDEBAR + MAIN
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.app-layout { display: flex; min-height: calc(100vh - 50px); }

/* Sidebar */
.sidebar {
  width: var(--sidebar-w); background: var(--navy); color: var(--text-inverse);
  display: flex; flex-direction: column;
  position: sticky; top: 50px; height: calc(100vh - 50px);
  transition: width var(--transition-normal);
  overflow: hidden;
}
.sidebar-brand { padding: 20px 20px 24px; border-bottom: 1px solid rgba(255,255,255,.08); }
.sidebar-brand h2 { font-size: 20px; font-weight: 800; letter-spacing: -0.5px; }
.sidebar-brand h2 span { color: var(--mint); }
.sidebar-brand p { font-size: 11px; color: rgba(255,255,255,.4); margin-top: 2px; }
.sidebar-nav { flex: 1; padding: 12px 8px; display: flex; flex-direction: column; gap: 2px; }
.nav-item {
  display: flex; align-items: center; gap: 12px;
  padding: 10px 14px; border-radius: var(--radius-lg);
  cursor: pointer; transition: all var(--transition-fast);
  font-size: 13px; font-weight: 500; color: rgba(255,255,255,.65);
  border-left: 3px solid transparent;
}
.nav-item:hover { background: rgba(255,255,255,.06); color: white; }
.nav-item.active {
  background: rgba(117,203,179,.08); color: white;
  border-left-color: var(--mint);
}
.nav-item .icon { width: 20px; text-align: center; flex-shrink: 0; font-size: 16px; }
.nav-item.disabled { opacity: .3; cursor: default; }
.sidebar-footer { padding: 16px 20px; border-top: 1px solid rgba(255,255,255,.08); font-size: 12px; color: rgba(255,255,255,.35); }

/* Main content */
.main { flex: 1; min-width: 0; }
.main-header {
  height: var(--header-h); background: var(--surface); border-bottom: 1px solid var(--border);
  display: flex; align-items: center; padding: 0 24px; justify-content: space-between;
  position: sticky; top: 50px; z-index: 100;
}
.main-header h3 { font-size: 15px; font-weight: 700; }
.main-content { padding: 24px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 1: DASHBOARD
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.stat-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
.stat-card {
  background: var(--surface); border-radius: var(--radius-xl); padding: 20px 24px;
  box-shadow: var(--shadow-sm); border: 1px solid var(--border);
  transition: box-shadow var(--transition-fast);
}
.stat-card:hover { box-shadow: var(--shadow-md); }
.stat-card .label { font-size: 12px; font-weight: 600; color: var(--text-tertiary); text-transform: uppercase; letter-spacing: .5px; }
.stat-card .value { font-size: 36px; font-weight: 800; margin-top: 4px; letter-spacing: -1.5px; color: var(--navy); }
.stat-card .sub { font-size: 12px; color: var(--text-tertiary); margin-top: 4px; }
.stat-card.alert .value { color: var(--coral); }
.stat-card.warning .value { color: var(--amber); }
.stat-card.ok .value { color: var(--success); }

.panel-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
.panel {
  background: var(--surface); border-radius: var(--radius-xl); box-shadow: var(--shadow-sm);
  border: 1px solid var(--border); overflow: hidden;
}
.panel-head {
  padding: 14px 20px; font-size: 13px; font-weight: 700; color: var(--text-primary);
  border-bottom: 1px solid var(--divider); display: flex; align-items: center; gap: 8px;
}
.panel-head .dot { width: 8px; height: 8px; border-radius: 50%; }
.panel-body { padding: 0; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED: TABLE
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.data-table { width: 100%; border-collapse: collapse; }
.data-table th {
  text-align: left; font-size: 11px; font-weight: 700; color: var(--text-tertiary);
  text-transform: uppercase; letter-spacing: .5px; padding: 10px 16px;
  border-bottom: 1.5px solid var(--border);
  cursor: pointer; user-select: none;
}
.data-table th:hover { color: var(--navy); }
.data-table td { padding: 12px 16px; border-bottom: 1px solid var(--divider); font-size: 13px; }
.data-table tr:nth-child(even) td { background: var(--bg-alt); }
.data-table tr:hover td { background: var(--surface-hover); }
.data-table tr.blocked td { border-right: 3px solid var(--coral); }
.data-table .ref { font-family: var(--font-mono); font-size: 12px; font-weight: 600; color: var(--navy); cursor: pointer; }
.data-table .ref:hover { text-decoration: underline; color: var(--navy-light); }
.data-table .amount { font-variant-numeric: tabular-nums; text-align: right; font-weight: 600; }
.data-table .time { color: var(--text-tertiary); font-size: 12px; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED: BADGES
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.badge {
  display: inline-flex; align-items: center; gap: 4px;
  padding: 3px 10px; border-radius: var(--radius-full); font-size: 11px; font-weight: 700;
}
.badge-mint { background: var(--mint-soft); color: #1A7A5C; }
.badge-amber { background: var(--amber-soft); color: #9A6A10; }
.badge-coral { background: var(--coral-soft); color: #B93636; }
.badge-navy { background: var(--ice-soft); color: var(--navy); }
.badge-gray { background: var(--bg-alt); color: var(--text-tertiary); }
.badge-success { background: var(--success-soft); color: #0D6E48; }
.badge-blocked { background: var(--coral); color: white; }

/* Credit dot */
.credit-dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; vertical-align: middle; margin-right: 6px; }
.credit-dot.mint { background: var(--mint); }
.credit-dot.amber { background: var(--amber); }
.credit-dot.coral { background: var(--coral); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SHARED: BUTTONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.btn {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 8px 16px; border-radius: var(--radius-lg); border: none;
  font-family: var(--font-body); font-size: 13px; font-weight: 600;
  cursor: pointer; transition: all var(--transition-fast);
}
.btn-primary { background: var(--navy); color: white; }
.btn-primary:hover { background: var(--navy-light); }
.btn-secondary { background: var(--surface); color: var(--navy); border: 1.5px solid var(--border); }
.btn-secondary:hover { background: var(--surface-hover); border-color: var(--border-strong); }
.btn-danger { background: var(--coral); color: white; }
.btn-danger:hover { background: #D04848; }
.btn-sm { padding: 5px 12px; font-size: 12px; }
.btn:disabled { opacity: .4; cursor: not-allowed; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILTERS BAR
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.filters {
  display: flex; gap: 10px; margin-bottom: 16px; flex-wrap: wrap; align-items: center;
}
.filter-select {
  padding: 7px 12px; border: 1.5px solid var(--border); border-radius: var(--radius-lg);
  font-family: var(--font-body); font-size: 12px; color: var(--text-secondary);
  background: var(--surface); cursor: pointer;
}
.filter-select:focus { border-color: var(--mint); outline: none; }
.filter-toggle {
  display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--text-secondary); cursor: pointer;
}
.filter-toggle input[type="checkbox"] { accent-color: var(--coral); }
.pagination {
  display: flex; align-items: center; justify-content: space-between;
  padding: 12px 0; font-size: 12px; color: var(--text-tertiary);
}
.pagination .pages { display: flex; gap: 4px; }
.pagination .pages button {
  padding: 6px 12px; border: 1px solid var(--border); border-radius: var(--radius-md);
  background: var(--surface); font-size: 12px; cursor: pointer; font-family: var(--font-body);
}
.pagination .pages button.active-page { background: var(--navy); color: white; border-color: var(--navy); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SCREEN 3: DETAIL
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.detail-header {
  display: flex; align-items: center; gap: 16px; margin-bottom: 24px; flex-wrap: wrap;
}
.detail-header .ref-big { font-family: var(--font-mono); font-size: 24px; font-weight: 800; color: var(--navy); letter-spacing: -0.5px; }
.detail-header .badges { display: flex; gap: 8px; align-items: center; }
.back-btn { color: var(--text-tertiary); font-size: 12px; cursor: pointer; margin-bottom: 12px; display: inline-flex; align-items: center; gap: 4px; }
.back-btn:hover { color: var(--navy); }

/* Timeline */
.timeline-wrap {
  background: var(--surface); border-radius: var(--radius-xl); padding: 24px 28px;
  box-shadow: var(--shadow-sm); border: 1px solid var(--border); margin-bottom: 20px;
}
.timeline-wrap h4 { font-size: 13px; font-weight: 700; color: var(--text-tertiary); margin-bottom: 20px; text-transform: uppercase; letter-spacing: .5px; }
.timeline {
  display: flex; align-items: flex-start; position: relative;
  padding: 0 8px;
}
.timeline-step {
  flex: 1; display: flex; flex-direction: column; align-items: center; position: relative; z-index: 2;
  min-width: 90px;
}
.timeline-node {
  width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
  font-size: 14px; font-weight: 700; position: relative;
}
.timeline-node.completed { background: var(--mint); color: white; }
.timeline-node.current { background: var(--navy); color: white; box-shadow: 0 0 0 6px rgba(1,58,87,.15); animation: pulse 2s infinite; }
.timeline-node.future { background: transparent; border: 2px dashed var(--border-strong); color: var(--text-disabled); }
.timeline-node.blocked { background: var(--coral); color: white; }
@keyframes pulse { 0%,100% { box-shadow: 0 0 0 6px rgba(1,58,87,.15); } 50% { box-shadow: 0 0 0 10px rgba(1,58,87,.08); } }
.timeline-label { margin-top: 10px; font-size: 11px; font-weight: 600; color: var(--text-secondary); text-align: center; }
.timeline-days { font-size: 10px; color: var(--text-tertiary); margin-top: 2px; }
/* Lines between nodes */
.timeline-line {
  position: absolute; top: 16px; height: 3px; z-index: 1;
  left: calc(50% + 16px); right: calc(-50% + 16px);
}
.timeline-step:last-child .timeline-line { display: none; }
.timeline-line.completed { background: var(--mint); }
.timeline-line.current { background: linear-gradient(90deg, var(--mint), var(--border)); }
.timeline-line.future { background: var(--border); border-top: 2px dashed var(--border-strong); height: 0; top: 17px; }

/* Detail sections grid */
.detail-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px; }
.detail-section {
  background: var(--surface); border-radius: var(--radius-xl); box-shadow: var(--shadow-sm);
  border: 1px solid var(--border); overflow: hidden;
}
.detail-section.full-width { grid-column: 1 / -1; }
.section-head {
  padding: 14px 20px; font-size: 13px; font-weight: 700; border-bottom: 1px solid var(--divider);
  display: flex; align-items: center; justify-content: space-between;
}
.section-body { padding: 16px 20px; }

/* Info grid inside detail */
.info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px 24px; }
.info-item .info-label { font-size: 11px; font-weight: 600; color: var(--text-tertiary); text-transform: uppercase; letter-spacing: .3px; }
.info-item .info-value { font-size: 14px; font-weight: 500; color: var(--text-primary); margin-top: 2px; }

/* Actions panel */
.actions-panel {
  background: var(--surface); border-radius: var(--radius-xl); box-shadow: var(--shadow-sm);
  border: 1px solid var(--border); padding: 20px; margin-bottom: 20px;
}
.actions-panel h4 { font-size: 12px; font-weight: 700; color: var(--text-tertiary); text-transform: uppercase; letter-spacing: .5px; margin-bottom: 14px; }
.actions-row { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 16px; }
.actions-row:last-child { margin-bottom: 0; }
.action-divider { width: 100%; height: 1px; background: var(--divider); margin: 4px 0; }
.btn .tooltip {
  display: none; position: absolute; bottom: calc(100% + 8px); left: 50%; transform: translateX(-50%);
  background: var(--navy); color: white; padding: 6px 12px; border-radius: var(--radius-md);
  font-size: 11px; white-space: nowrap; pointer-events: none;
}
.btn:disabled:hover .tooltip { display: block; }
.btn { position: relative; }

/* Costs table total */
.cost-total { display: flex; justify-content: space-between; padding: 12px 16px; font-weight: 700; background: var(--bg-alt); border-top: 2px solid var(--border); }

/* Toast */
.toast-demo {
  position: fixed; bottom: 24px; right: 24px; z-index: 9999;
  padding: 14px 20px; border-radius: var(--radius-xl); font-size: 13px; font-weight: 600;
  display: none; align-items: center; gap: 8px; box-shadow: var(--shadow-lg);
  animation: slideUp .3s ease-out;
}
.toast-success { background: var(--mint); color: var(--navy); }
.toast-error { background: var(--coral); color: white; }
@keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

/* Modal */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(1,58,87,.5); z-index: 5000;
  display: none; align-items: center; justify-content: center;
  backdrop-filter: blur(4px);
}
.modal-overlay.show { display: flex; }
.modal {
  background: var(--surface); border-radius: var(--radius-2xl); padding: 32px;
  width: 420px; max-width: 90vw; box-shadow: var(--shadow-lg);
}
.modal h3 { font-size: 18px; font-weight: 700; margin-bottom: 8px; }
.modal p { font-size: 13px; color: var(--text-secondary); margin-bottom: 20px; }
.modal textarea {
  width: 100%; min-height: 80px; padding: 10px 14px; border: 1.5px solid var(--border);
  border-radius: var(--radius-lg); font-family: var(--font-body); font-size: 13px;
  resize: vertical; margin-bottom: 16px;
}
.modal textarea:focus { border-color: var(--coral); outline: none; }
.modal-actions { display: flex; gap: 10px; justify-content: flex-end; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SPEC ANNOTATIONS
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
.spec-note {
  background: #FFFCE6; border: 1px solid #E8D44D; border-radius: var(--radius-lg);
  padding: 10px 14px; font-size: 11px; color: #6B5E00; margin: 12px 0;
  display: flex; align-items: flex-start; gap: 8px;
}
.spec-note::before { content: "ğŸ“"; flex-shrink: 0; }
.spec-note code { background: rgba(0,0,0,.06); padding: 1px 5px; border-radius: 3px; font-family: var(--font-mono); font-size: 10px; }

/* Loading skeleton */
.skeleton { background: linear-gradient(90deg, var(--bg-alt) 25%, var(--bg) 50%, var(--bg-alt) 75%); background-size: 200%; animation: shimmer 1.5s infinite; border-radius: var(--radius-md); }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SPEC NAVIGATION BAR
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<nav class="spec-nav">
  <div class="logo">mwt<span>.one</span></div>
  <button class="active" onclick="showScreen('login')">â‘  Login</button>
  <button onclick="showScreen('dashboard')">â‘¡ Dashboard</button>
  <button onclick="showScreen('list')">â‘¢ Lista</button>
  <button onclick="showScreen('detail')">â‘£ Detalle</button>
  <button onclick="showScreen('detail2')">â‘¤ Detalle limpio</button>
  <button onclick="showScreen('catalog')">â‘¥ CatÃ¡logo UI</button>
  <span class="badge">SPRINT 3 â€” VISUAL SPEC v1.1</span>
  <button onclick="toggleTheme()" id="theme-toggle" style="margin-left:8px;">ğŸŒ™ Dark</button>
</nav>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCREEN 0: LOGIN
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-login" class="screen active">
  <div class="login-wrap">
    <div class="login-card">
      <div class="brand">
        <h1>mwt<span>.one</span></h1>
        <p>Centro de Operaciones</p>
      </div>
      <label>Usuario</label>
      <input type="text" placeholder="alvaro@muitowork.com" value="alvaro@muitowork.com">
      <label>ContraseÃ±a</label>
      <input type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" value="password">
      <button class="btn-login" onclick="showScreen('dashboard')">Ingresar</button>
      <div class="footnote">Django session + CSRF cookie Â· S3-D01</div>
    </div>
  </div>
  <div style="max-width:600px;margin:0 auto;padding:24px;">
    <div class="spec-note">
      <b>Item 3 + Item 7:</b> Login via <code>POST /api/auth/login/</code>. Al montar app, <code>GET /api/auth/me/</code> setea CSRF cookie (siempre, incluso en 401). Next.js envÃ­a <code>X-CSRFToken</code> header en toda mutaciÃ³n. Redirect a <code>/</code> (dashboard) on success. 401 â†’ error message. Interceptor global: 401 en cualquier call â†’ redirect a login.
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCREEN 1: DASHBOARD
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-dashboard" class="screen">
  <div class="app-layout">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-brand">
        <h2>mwt<span>.one</span></h2>
        <p>Muito Work Â· v0.3</p>
      </div>
      <nav class="sidebar-nav">
        <div class="nav-item active"><span class="icon">ğŸ“Š</span> Dashboard</div>
        <div class="nav-item" onclick="showScreen('list')" style="cursor:pointer"><span class="icon">ğŸ“</span> Expedientes</div>
        <div class="nav-item disabled"><span class="icon">ğŸ’°</span> Costos <span style="font-size:10px;opacity:.5;margin-left:auto">Sprint 4</span></div>
        <div class="nav-item disabled"><span class="icon">ğŸ“ˆ</span> Financiero <span style="font-size:10px;opacity:.5;margin-left:auto">Sprint 5</span></div>
        <div class="nav-item disabled"><span class="icon">âš™ï¸</span> Config <span style="font-size:10px;opacity:.5;margin-left:auto">Post-MVP</span></div>
      </nav>
      <div class="sidebar-footer">
        <div style="cursor:pointer" onclick="showScreen('login')">ğŸšª Cerrar sesiÃ³n</div>
        <div style="margin-top:8px;font-size:10px;">Alvaro Â· CEO</div>
      </div>
    </aside>

    <div class="main">
      <header class="main-header">
        <h3>Dashboard</h3>
        <span style="font-size:11px;color:var(--text-tertiary)">Auto-refresh cada 60s Â· Polling</span>
      </header>
      <div class="main-content">
        <div class="spec-note">
          <b>Item 6:</b> Consume exclusivamente <code>GET /api/ui/dashboard/</code>. No hace calls a <code>/api/ui/expedientes/</code>. Polling 60s con <code>setInterval</code>, no WebSocket.
        </div>

        <!-- Stat cards -->
        <div class="stat-grid">
          <div class="stat-card">
            <div class="label">Expedientes activos</div>
            <div class="value">47</div>
            <div class="sub">+3 esta semana</div>
          </div>
          <div class="stat-card alert">
            <div class="label">Alertas crÃ©dito</div>
            <div class="value">8</div>
            <div class="sub"><span class="credit-dot amber"></span>5 Ã¡mbar Â· <span class="credit-dot coral"></span>3 coral</div>
          </div>
          <div class="stat-card alert">
            <div class="label">Bloqueados</div>
            <div class="value">2</div>
            <div class="sub">DÃ­a 75+ crÃ©dito</div>
          </div>
          <div class="stat-card">
            <div class="label">Costo acumulado</div>
            <div class="value" style="font-variant-numeric:tabular-nums;font-family:var(--font-body)">$284,350</div>
            <div class="sub">USD Â· 47 expedientes</div>
          </div>
        </div>

        <!-- Panels -->
        <div class="panel-grid">
          <!-- Top Risk -->
          <div class="panel">
            <div class="panel-head"><span class="dot" style="background:var(--coral)"></span> Top Riesgo CrÃ©dito</div>
            <div class="panel-body">
              <table class="data-table">
                <thead><tr><th>Ref</th><th>Estado</th><th>DÃ­as</th><th>Band</th></tr></thead>
                <tbody>
                  <tr class="blocked"><td class="ref" onclick="showScreen('detail')">EXP-2026-0012</td><td><span class="badge badge-navy">En TrÃ¡nsito</span></td><td>82</td><td><span class="credit-dot coral"></span> CORAL</td></tr>
                  <tr class="blocked"><td class="ref">EXP-2026-0019</td><td><span class="badge badge-navy">En Destino</span></td><td>78</td><td><span class="credit-dot coral"></span> CORAL</td></tr>
                  <tr><td class="ref">EXP-2026-0031</td><td><span class="badge badge-navy">En TrÃ¡nsito</span></td><td>76</td><td><span class="credit-dot coral"></span> CORAL</td></tr>
                  <tr><td class="ref">EXP-2026-0008</td><td><span class="badge badge-mint">ProducciÃ³n</span></td><td>68</td><td><span class="credit-dot amber"></span> AMBER</td></tr>
                  <tr><td class="ref">EXP-2026-0044</td><td><span class="badge badge-mint">PreparaciÃ³n</span></td><td>63</td><td><span class="credit-dot amber"></span> AMBER</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Blocked -->
          <div class="panel">
            <div class="panel-head"><span class="dot" style="background:var(--coral)"></span> Bloqueados</div>
            <div class="panel-body">
              <table class="data-table">
                <thead><tr><th>Ref</th><th>Estado</th><th>RazÃ³n</th></tr></thead>
                <tbody>
                  <tr><td class="ref" onclick="showScreen('detail')">EXP-2026-0012</td><td><span class="badge badge-navy">En TrÃ¡nsito</span></td><td style="font-size:12px;color:var(--coral)">CrÃ©dito dÃ­a 75 â€” bloqueado automÃ¡tico</td></tr>
                  <tr><td class="ref">EXP-2026-0019</td><td><span class="badge badge-navy">En Destino</span></td><td style="font-size:12px;color:var(--coral)">CrÃ©dito dÃ­a 75 â€” bloqueado automÃ¡tico</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCREEN 2: LISTA EXPEDIENTES
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-list" class="screen">
  <div class="app-layout">
    <aside class="sidebar">
      <div class="sidebar-brand"><h2>mwt<span>.one</span></h2><p>Muito Work Â· v0.3</p></div>
      <nav class="sidebar-nav">
        <div class="nav-item" onclick="showScreen('dashboard')" style="cursor:pointer"><span class="icon">ğŸ“Š</span> Dashboard</div>
        <div class="nav-item active"><span class="icon">ğŸ“</span> Expedientes</div>
        <div class="nav-item disabled"><span class="icon">ğŸ’°</span> Costos</div>
        <div class="nav-item disabled"><span class="icon">ğŸ“ˆ</span> Financiero</div>
        <div class="nav-item disabled"><span class="icon">âš™ï¸</span> Config</div>
      </nav>
      <div class="sidebar-footer"><div>ğŸšª Cerrar sesiÃ³n</div><div style="margin-top:8px;font-size:10px;">Alvaro Â· CEO</div></div>
    </aside>
    <div class="main">
      <header class="main-header">
        <h3>Expedientes</h3>
        <span style="font-size:12px;color:var(--text-tertiary)">47 activos</span>
      </header>
      <div class="main-content">
        <div class="spec-note">
          <b>Item 4:</b> Consume <code>GET /api/ui/expedientes/?status=&brand=&client=&is_blocked=&ordering=-credit_days_elapsed&page=1</code>. Paginado default 25, max 100. Tabla con zebra striping. Row bloqueado = <code>border-right 3px coral</code>. Click fila â†’ detalle.
        </div>

        <!-- Filters -->
        <div class="filters">
          <select class="filter-select">
            <option>Todos los estados</option>
            <option>Registro</option>
            <option>ProducciÃ³n</option>
            <option>PreparaciÃ³n</option>
            <option>TrÃ¡nsito</option>
            <option>En Destino</option>
            <option>Facturado</option>
            <option>Cerrado</option>
            <option>Cancelado</option>
          </select>
          <select class="filter-select">
            <option>Todas las marcas</option>
            <option>Marluvas</option>
          </select>
          <select class="filter-select">
            <option>Todos los clientes</option>
            <option>Sondel</option>
            <option>MedTech Hub</option>
          </select>
          <label class="filter-toggle">
            <input type="checkbox"> Solo bloqueados
          </label>
        </div>

        <!-- Table -->
        <div style="background:var(--surface);border-radius:var(--radius-xl);box-shadow:var(--shadow-sm);border:1px solid var(--border);overflow:hidden;">
          <table class="data-table">
            <thead>
              <tr>
                <th>Ref â†•</th>
                <th>Estado</th>
                <th>Cliente</th>
                <th>Marca</th>
                <th>DÃ­as crÃ©dito â†“</th>
                <th style="text-align:right">Monto â†•</th>
                <th>Ãšltima actividad</th>
              </tr>
            </thead>
            <tbody>
              <tr class="blocked">
                <td class="ref" onclick="showScreen('detail')">EXP-2026-0012</td>
                <td><span class="badge badge-navy">En TrÃ¡nsito</span></td>
                <td>Sondel</td>
                <td>Marluvas</td>
                <td><span class="credit-dot coral"></span> 82</td>
                <td class="amount">$18,420.00</td>
                <td class="time">hace 2h</td>
              </tr>
              <tr class="blocked">
                <td class="ref">EXP-2026-0019</td>
                <td><span class="badge badge-navy">En Destino</span></td>
                <td>MedTech Hub</td>
                <td>Marluvas</td>
                <td><span class="credit-dot coral"></span> 78</td>
                <td class="amount">$24,180.00</td>
                <td class="time">hace 1d</td>
              </tr>
              <tr>
                <td class="ref">EXP-2026-0031</td>
                <td><span class="badge badge-navy">En TrÃ¡nsito</span></td>
                <td>Sondel</td>
                <td>Marluvas</td>
                <td><span class="credit-dot coral"></span> 76</td>
                <td class="amount">$12,850.00</td>
                <td class="time">hace 3d</td>
              </tr>
              <tr>
                <td class="ref">EXP-2026-0008</td>
                <td><span class="badge badge-mint">ProducciÃ³n</span></td>
                <td>Sondel</td>
                <td>Marluvas</td>
                <td><span class="credit-dot amber"></span> 68</td>
                <td class="amount">$9,340.00</td>
                <td class="time">hace 5d</td>
              </tr>
              <tr>
                <td class="ref">EXP-2026-0044</td>
                <td><span class="badge badge-mint">PreparaciÃ³n</span></td>
                <td>MedTech Hub</td>
                <td>Marluvas</td>
                <td><span class="credit-dot amber"></span> 63</td>
                <td class="amount">$15,720.00</td>
                <td class="time">hace 1d</td>
              </tr>
              <tr>
                <td class="ref">EXP-2026-0047</td>
                <td><span class="badge badge-mint">ProducciÃ³n</span></td>
                <td>Sondel</td>
                <td>Marluvas</td>
                <td><span class="credit-dot mint"></span> 45</td>
                <td class="amount">$14,350.00</td>
                <td class="time">hace 6h</td>
              </tr>
              <tr>
                <td class="ref">EXP-2026-0051</td>
                <td><span class="badge badge-gray">Registro</span></td>
                <td>Sondel</td>
                <td>Marluvas</td>
                <td><span class="credit-dot mint"></span> 12</td>
                <td class="amount">$3,200.00</td>
                <td class="time">hace 12h</td>
              </tr>
              <tr>
                <td class="ref">EXP-2026-0053</td>
                <td><span class="badge badge-success">Cerrado</span></td>
                <td>MedTech Hub</td>
                <td>Marluvas</td>
                <td><span style="color:var(--text-disabled)">â€”</span></td>
                <td class="amount">$22,100.00</td>
                <td class="time">hace 2sem</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="pagination">
          <span>Mostrando 1â€“8 de 47 expedientes</span>
          <div class="pages">
            <button class="active-page">1</button>
            <button>2</button>
            <button>â†’</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCREEN 3: DETALLE EXPEDIENTE
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-detail" class="screen">
  <div class="app-layout">
    <aside class="sidebar">
      <div class="sidebar-brand"><h2>mwt<span>.one</span></h2><p>Muito Work Â· v0.3</p></div>
      <nav class="sidebar-nav">
        <div class="nav-item" onclick="showScreen('dashboard')" style="cursor:pointer"><span class="icon">ğŸ“Š</span> Dashboard</div>
        <div class="nav-item active"><span class="icon">ğŸ“</span> Expedientes</div>
        <div class="nav-item disabled"><span class="icon">ğŸ’°</span> Costos</div>
        <div class="nav-item disabled"><span class="icon">ğŸ“ˆ</span> Financiero</div>
        <div class="nav-item disabled"><span class="icon">âš™ï¸</span> Config</div>
      </nav>
      <div class="sidebar-footer"><div>ğŸšª Cerrar sesiÃ³n</div><div style="margin-top:8px;font-size:10px;">Alvaro Â· CEO</div></div>
    </aside>
    <div class="main">
      <header class="main-header">
        <h3>Detalle expediente</h3>
      </header>
      <div class="main-content">
        <div class="spec-note">
          <b>Item 5:</b> Consume <code>GET /api/ui/expedientes/{id}</code> (un solo fetch â†’ bundle completo). Re-fetch despuÃ©s de cada acciÃ³n. <code>available_actions[]</code> viene ordenado por backend: Pipeline PRIMARY â†’ SECONDARY â†’ Ops.
        </div>

        <div class="back-btn" onclick="showScreen('list')">â† Volver a expedientes</div>

        <!-- Header -->
        <div class="detail-header">
          <span class="ref-big">EXP-2026-0012</span>
          <div class="badges">
            <span class="badge badge-navy">En TrÃ¡nsito</span>
            <span class="badge badge-coral">ğŸ”´ CORAL Â· 82 dÃ­as</span>
            <span class="badge badge-blocked">â›” BLOQUEADO</span>
          </div>
        </div>

        <!-- Timeline -->
        <div class="timeline-wrap">
          <h4>Timeline del expediente</h4>
          <div class="timeline">
            <div class="timeline-step">
              <div class="timeline-node completed">âœ“</div>
              <div class="timeline-line completed"></div>
              <div class="timeline-label">Registro</div>
              <div class="timeline-days">2 dÃ­as</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node completed">âœ“</div>
              <div class="timeline-line completed"></div>
              <div class="timeline-label">ProducciÃ³n</div>
              <div class="timeline-days">18 dÃ­as</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node completed">âœ“</div>
              <div class="timeline-line completed"></div>
              <div class="timeline-label">PreparaciÃ³n</div>
              <div class="timeline-days">5 dÃ­as</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node current">â—</div>
              <div class="timeline-line current"></div>
              <div class="timeline-label">En TrÃ¡nsito</div>
              <div class="timeline-days">57 dÃ­as âš ï¸</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node future">5</div>
              <div class="timeline-line future"></div>
              <div class="timeline-label">En Destino</div>
              <div class="timeline-days">â€”</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node future">6</div>
              <div class="timeline-line future"></div>
              <div class="timeline-label">Facturado</div>
              <div class="timeline-days">â€”</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node future">7</div>
              <div class="timeline-line future"></div>
              <div class="timeline-label">Cerrado</div>
              <div class="timeline-days">â€”</div>
            </div>
          </div>
        </div>

        <!-- Actions panel -->
        <div class="actions-panel">
          <h4>âš¡ Acciones Pipeline (contextuales)</h4>
          <div class="actions-row">
            <button class="btn btn-primary" disabled>
              Confirmar Arribo (C12)
              <span class="tooltip">Expediente bloqueado â€” desbloquear primero</span>
            </button>
          </div>
          <div class="action-divider"></div>
          <h4>ğŸ”§ Acciones Ops (siempre visibles)</h4>
          <div class="actions-row">
            <button class="btn btn-danger btn-sm" onclick="showModal()">â›” Desbloquear</button>
            <button class="btn btn-secondary btn-sm" onclick="showToast('success','Costo registrado: Flete marÃ­timo $2,400')">ğŸ’° Registrar Costo</button>
            <button class="btn btn-danger btn-sm">ğŸ”„ Corregir Artefacto</button>
            <button class="btn btn-danger btn-sm">ğŸ—‘ï¸ Anular Artefacto</button>
          </div>
          <div class="spec-note" style="margin-top:12px;">
            <b>Contrato:</b> Pipeline actions con <code>enabled:false</code> aparecen greyed out + tooltip con <code>disabled_reason</code>. Ops actions: Block/Unblock segÃºn <code>is_blocked</code>. C15 = formulario 4 campos. C19/C20 = <code>artifact_selector</code> (COMPLETED_SAME_TYPE | VOIDABLE_ONLY).
          </div>
        </div>

        <!-- Detail grid -->
        <div class="detail-grid">
          <!-- Info -->
          <div class="detail-section">
            <div class="section-head">ğŸ“‹ Datos del expediente</div>
            <div class="section-body">
              <div class="info-grid">
                <div class="info-item"><div class="info-label">Cliente</div><div class="info-value">Sondel</div></div>
                <div class="info-item"><div class="info-label">Marca</div><div class="info-value">Marluvas</div></div>
                <div class="info-item"><div class="info-label">Modo</div><div class="info-value">B â€” DistribuciÃ³n directa</div></div>
                <div class="info-item"><div class="info-label">Entidad</div><div class="info-value">Muito Work Limitada</div></div>
                <div class="info-item"><div class="info-label">Creado</div><div class="info-value">10 Ene 2026</div></div>
                <div class="info-item"><div class="info-label">Reloj crÃ©dito</div><div class="info-value"><span class="credit-dot coral"></span> 82/90 dÃ­as</div></div>
              </div>
            </div>
          </div>

          <!-- Artifacts -->
          <div class="detail-section">
            <div class="section-head">ğŸ“ Artefactos <span class="badge badge-gray" style="margin-left:auto">4</span></div>
            <div class="section-body" style="padding:0;">
              <table class="data-table">
                <thead><tr><th>Tipo</th><th>Status</th><th>Fecha</th></tr></thead>
                <tbody>
                  <tr><td>ART-01 Â· OC Cliente</td><td><span class="badge badge-success">Completado</span></td><td class="time">10 Ene</td></tr>
                  <tr><td>ART-02 Â· Proforma</td><td><span class="badge badge-success">Completado</span></td><td class="time">12 Ene</td></tr>
                  <tr><td>ART-05 Â· AWB/BL</td><td><span class="badge badge-success">Completado</span></td><td class="time">7 Feb</td></tr>
                  <tr><td>ART-09 Â· Factura MWT</td><td><span class="badge badge-gray">Pendiente</span></td><td class="time">â€”</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Documents -->
          <div class="detail-section">
            <div class="section-head">ğŸ“„ Documentos <span class="badge badge-gray" style="margin-left:auto">3</span></div>
            <div class="section-body" style="padding:0;">
              <table class="data-table">
                <thead><tr><th>Nombre</th><th>Tipo</th><th></th></tr></thead>
                <tbody>
                  <tr><td>PI-2026-0012.pdf</td><td class="time">Proforma</td><td><a href="#" style="color:var(--navy);font-size:12px;font-weight:600;">â¬‡ Descargar</a></td></tr>
                  <tr><td>BL-COSCO-2026-0012.pdf</td><td class="time">BL</td><td><a href="#" style="color:var(--navy);font-size:12px;font-weight:600;">â¬‡ Descargar</a></td></tr>
                  <tr><td>OC-Sondel-0012.pdf</td><td class="time">OC</td><td><a href="#" style="color:var(--navy);font-size:12px;font-weight:600;">â¬‡ Descargar</a></td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <!-- Costs -->
          <div class="detail-section">
            <div class="section-head">ğŸ’° Costos <span class="badge badge-gray" style="margin-left:auto">$18,420</span></div>
            <div class="section-body" style="padding:0;">
              <table class="data-table">
                <thead><tr><th>Concepto</th><th>CategorÃ­a</th><th style="text-align:right">Monto</th></tr></thead>
                <tbody>
                  <tr><td>Producto Marluvas</td><td><span class="badge badge-gray">product</span></td><td class="amount">$12,800.00</td></tr>
                  <tr><td>Flete marÃ­timo COSCO</td><td><span class="badge badge-gray">freight</span></td><td class="amount">$2,400.00</td></tr>
                  <tr><td>Seguro carga</td><td><span class="badge badge-gray">insurance</span></td><td class="amount">$620.00</td></tr>
                  <tr><td>Agente aduanal CR</td><td><span class="badge badge-gray">customs</span></td><td class="amount">$1,800.00</td></tr>
                  <tr><td>Handling puerto Caldera</td><td><span class="badge badge-gray">handling</span></td><td class="amount">$800.00</td></tr>
                </tbody>
              </table>
              <div class="cost-total">
                <span>Total costos</span>
                <span style="font-variant-numeric:tabular-nums">$18,420.00 USD</span>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCREEN 5: DETALLE â€” EXPEDIENTE SALUDABLE (sin bloqueo, estado temprano)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-detail2" class="screen">
  <div class="app-layout">
    <aside class="sidebar">
      <div class="sidebar-brand"><h2>mwt<span>.one</span></h2><p>Muito Work Â· v0.3</p></div>
      <nav class="sidebar-nav">
        <div class="nav-item" onclick="showScreen('dashboard')" style="cursor:pointer"><span class="icon">ğŸ“Š</span> Dashboard</div>
        <div class="nav-item active"><span class="icon">ğŸ“</span> Expedientes</div>
        <div class="nav-item disabled"><span class="icon">ğŸ’°</span> Costos</div>
        <div class="nav-item disabled"><span class="icon">ğŸ“ˆ</span> Financiero</div>
        <div class="nav-item disabled"><span class="icon">âš™ï¸</span> Config</div>
      </nav>
      <div class="sidebar-footer"><div>ğŸšª Cerrar sesiÃ³n</div><div style="margin-top:8px;font-size:10px;">Alvaro Â· CEO</div></div>
    </aside>
    <div class="main">
      <header class="main-header"><h3>Detalle expediente</h3></header>
      <div class="main-content">
        <div class="spec-note">
          <b>Variante:</b> Expediente saludable en ProducciÃ³n. Sin bloqueo, crÃ©dito MINT, acciones Pipeline habilitadas. Muestra el caso "normal" donde el CEO avanza estado sin fricciÃ³n.
        </div>

        <div class="back-btn" onclick="showScreen('list')">â† Volver a expedientes</div>

        <div class="detail-header">
          <span class="ref-big">EXP-2026-0047</span>
          <div class="badges">
            <span class="badge badge-mint">ProducciÃ³n</span>
            <span class="badge badge-mint">ğŸŸ¢ MINT Â· 45 dÃ­as</span>
          </div>
        </div>

        <!-- Timeline: en producciÃ³n, 2 completados, 1 actual, 4 futuros -->
        <div class="timeline-wrap">
          <h4>Timeline del expediente</h4>
          <div class="timeline">
            <div class="timeline-step">
              <div class="timeline-node completed">âœ“</div>
              <div class="timeline-line completed"></div>
              <div class="timeline-label">Registro</div>
              <div class="timeline-days">2 dÃ­as</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node current">â—</div>
              <div class="timeline-line current"></div>
              <div class="timeline-label">ProducciÃ³n</div>
              <div class="timeline-days">43 dÃ­as</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node future">3</div>
              <div class="timeline-line future"></div>
              <div class="timeline-label">PreparaciÃ³n</div>
              <div class="timeline-days">â€”</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node future">4</div>
              <div class="timeline-line future"></div>
              <div class="timeline-label">En TrÃ¡nsito</div>
              <div class="timeline-days">â€”</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node future">5</div>
              <div class="timeline-line future"></div>
              <div class="timeline-label">En Destino</div>
              <div class="timeline-days">â€”</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node future">6</div>
              <div class="timeline-line future"></div>
              <div class="timeline-label">Facturado</div>
              <div class="timeline-days">â€”</div>
            </div>
            <div class="timeline-step">
              <div class="timeline-node future">7</div>
              <div class="timeline-line future"></div>
              <div class="timeline-label">Cerrado</div>
              <div class="timeline-days">â€”</div>
            </div>
          </div>
        </div>

        <!-- Actions: Pipeline enabled, Ops normal -->
        <div class="actions-panel">
          <h4>âš¡ Acciones Pipeline (contextuales)</h4>
          <div class="actions-row">
            <button class="btn btn-primary" onclick="showToast('success','ProducciÃ³n confirmada â€” avanzando a PreparaciÃ³n')">
              Confirmar ProducciÃ³n (C08)
            </button>
            <button class="btn btn-secondary btn-sm" disabled>
              Aprobar Despacho (C09)
              <span class="tooltip">Solo disponible en PreparaciÃ³n</span>
            </button>
          </div>
          <div class="action-divider"></div>
          <h4>ğŸ”§ Acciones Ops (siempre visibles)</h4>
          <div class="actions-row">
            <button class="btn btn-danger btn-sm" onclick="showModal2('block')">ğŸ”’ Bloquear</button>
            <button class="btn btn-secondary btn-sm" disabled>
              ğŸ”“ Desbloquear
              <span class="tooltip">El expediente no estÃ¡ bloqueado</span>
            </button>
            <button class="btn btn-secondary btn-sm" onclick="showModal2('cost')">ğŸ’° Registrar Costo</button>
            <button class="btn btn-danger btn-sm" onclick="showModal2('supersede')">ğŸ”„ Corregir Artefacto</button>
            <button class="btn btn-danger btn-sm" disabled>
              ğŸ—‘ï¸ Anular Artefacto
              <span class="tooltip">No hay artefactos anulables (solo ART-09)</span>
            </button>
          </div>
        </div>

        <div class="detail-grid">
          <div class="detail-section">
            <div class="section-head">ğŸ“‹ Datos del expediente</div>
            <div class="section-body">
              <div class="info-grid">
                <div class="info-item"><div class="info-label">Cliente</div><div class="info-value">Sondel</div></div>
                <div class="info-item"><div class="info-label">Marca</div><div class="info-value">Marluvas</div></div>
                <div class="info-item"><div class="info-label">Modo</div><div class="info-value">B â€” DistribuciÃ³n directa</div></div>
                <div class="info-item"><div class="info-label">Entidad</div><div class="info-value">Muito Work Limitada</div></div>
                <div class="info-item"><div class="info-label">Creado</div><div class="info-value">10 Ene 2026</div></div>
                <div class="info-item"><div class="info-label">Reloj crÃ©dito</div><div class="info-value"><span class="credit-dot mint"></span> 45/90 dÃ­as</div></div>
              </div>
            </div>
          </div>
          <div class="detail-section">
            <div class="section-head">ğŸ“ Artefactos <span class="badge badge-gray" style="margin-left:auto">2</span></div>
            <div class="section-body" style="padding:0;">
              <table class="data-table">
                <thead><tr><th>Tipo</th><th>Status</th><th>Fecha</th></tr></thead>
                <tbody>
                  <tr><td>ART-01 Â· OC Cliente</td><td><span class="badge badge-success">Completado</span></td><td class="time">10 Ene</td></tr>
                  <tr><td>ART-02 Â· Proforma</td><td><span class="badge badge-success">Completado</span></td><td class="time">12 Ene</td></tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="detail-section">
            <div class="section-head">ğŸ“„ Documentos <span class="badge badge-gray" style="margin-left:auto">2</span></div>
            <div class="section-body" style="padding:0;">
              <table class="data-table">
                <thead><tr><th>Nombre</th><th>Tipo</th><th></th></tr></thead>
                <tbody>
                  <tr><td>OC-Sondel-0047.pdf</td><td class="time">OC</td><td><a href="#" style="color:var(--mint);font-size:12px;font-weight:600;">â¬‡ Descargar</a></td></tr>
                  <tr><td>PI-2026-0047.pdf</td><td class="time">Proforma</td><td><a href="#" style="color:var(--mint);font-size:12px;font-weight:600;">â¬‡ Descargar</a></td></tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="detail-section">
            <div class="section-head">ğŸ’° Costos <span class="badge badge-gray" style="margin-left:auto">$14,350</span></div>
            <div class="section-body" style="padding:0;">
              <table class="data-table">
                <thead><tr><th>Concepto</th><th>CategorÃ­a</th><th style="text-align:right">Monto</th></tr></thead>
                <tbody>
                  <tr><td>Producto Marluvas</td><td><span class="badge badge-gray">product</span></td><td class="amount">$11,200.00</td></tr>
                  <tr><td>Flete marÃ­timo</td><td><span class="badge badge-gray">freight</span></td><td class="amount">$2,350.00</td></tr>
                  <tr><td>Seguro carga</td><td><span class="badge badge-gray">insurance</span></td><td class="amount">$800.00</td></tr>
                </tbody>
              </table>
              <div class="cost-total"><span>Total costos</span><span style="font-variant-numeric:tabular-nums">$14,350.00 USD</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCREEN 6: CATÃLOGO DE VARIANTES UI
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="screen-catalog" class="screen">
  <div style="max-width:1100px;margin:0 auto;padding:32px 24px;">
    <h2 style="font-size:24px;font-weight:800;letter-spacing:-1px;margin-bottom:4px;">CatÃ¡logo de variantes UI</h2>
    <p style="color:var(--text-tertiary);font-size:13px;margin-bottom:32px;">Todos los estados y variantes que AG-03 debe implementar. Toggle ğŸŒ™/â˜€ï¸ para ver dark mode.</p>

    <!-- â•â• BADGES â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:16px;">Badges â€” Todos los estados de expediente</h3>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px;">
        <span class="badge badge-gray">Registro</span>
        <span class="badge badge-mint">ProducciÃ³n</span>
        <span class="badge badge-mint">PreparaciÃ³n</span>
        <span class="badge badge-navy">En TrÃ¡nsito</span>
        <span class="badge badge-navy">En Destino</span>
        <span class="badge badge-amber">Facturado</span>
        <span class="badge badge-success">Cerrado</span>
        <span class="badge" style="background:#F3E8E8;color:#8B4C4C;">Cancelado</span>
      </div>
      <h3 style="font-size:14px;font-weight:700;margin-bottom:12px;">Badges â€” CrÃ©dito</h3>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px;">
        <span class="badge badge-mint">ğŸŸ¢ MINT Â· 12 dÃ­as</span>
        <span class="badge badge-mint">ğŸŸ¢ MINT Â· 45 dÃ­as</span>
        <span class="badge badge-mint">ğŸŸ¢ MINT Â· 59 dÃ­as</span>
        <span class="badge badge-amber">ğŸŸ¡ AMBER Â· 60 dÃ­as</span>
        <span class="badge badge-amber">ğŸŸ¡ AMBER Â· 68 dÃ­as</span>
        <span class="badge badge-amber">ğŸŸ¡ AMBER Â· 74 dÃ­as</span>
        <span class="badge badge-coral">ğŸ”´ CORAL Â· 75 dÃ­as</span>
        <span class="badge badge-coral">ğŸ”´ CORAL Â· 82 dÃ­as</span>
        <span class="badge badge-coral">ğŸ”´ CORAL Â· 90 dÃ­as</span>
      </div>
      <h3 style="font-size:14px;font-weight:700;margin-bottom:12px;">Badges â€” Especiales</h3>
      <div style="display:flex;gap:8px;flex-wrap:wrap;">
        <span class="badge badge-blocked">â›” BLOQUEADO</span>
        <span class="badge badge-success">Completado</span>
        <span class="badge badge-gray">Pendiente</span>
        <span class="badge" style="background:#F8E8FF;color:#7B2DBF;text-decoration:line-through;">Superseded</span>
        <span class="badge" style="background:var(--coral-soft);color:var(--coral);text-decoration:line-through;">Void</span>
      </div>
    </div>

    <!-- â•â• CREDIT DOTS â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:16px;">SemÃ¡foro crÃ©dito â€” Dots inline</h3>
      <div style="display:flex;gap:24px;flex-wrap:wrap;">
        <span><span class="credit-dot mint"></span> MINT (&lt;60d)</span>
        <span><span class="credit-dot amber"></span> AMBER (60-74d)</span>
        <span><span class="credit-dot coral"></span> CORAL (â‰¥75d)</span>
        <span style="color:var(--text-disabled);">â€” (Cerrado/Cancelado)</span>
      </div>
    </div>

    <!-- â•â• BUTTONS â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:16px;">Botones â€” Variantes y estados</h3>
      <div style="display:flex;gap:10px;flex-wrap:wrap;margin-bottom:16px;">
        <button class="btn btn-primary">Primary (Pipeline)</button>
        <button class="btn btn-secondary">Secondary</button>
        <button class="btn btn-danger">Danger (Block/Void)</button>
        <button class="btn btn-primary btn-sm">Primary SM</button>
        <button class="btn btn-secondary btn-sm">Secondary SM</button>
        <button class="btn btn-danger btn-sm">Danger SM</button>
      </div>
      <h3 style="font-size:14px;font-weight:700;margin-bottom:12px;">Botones â€” Disabled + tooltip</h3>
      <div style="display:flex;gap:10px;flex-wrap:wrap;">
        <button class="btn btn-primary" disabled>
          Confirmar Arribo
          <span class="tooltip">Expediente bloqueado â€” desbloquear primero</span>
        </button>
        <button class="btn btn-secondary btn-sm" disabled>
          ğŸ”“ Desbloquear
          <span class="tooltip">El expediente no estÃ¡ bloqueado</span>
        </button>
        <button class="btn btn-danger btn-sm" disabled>
          ğŸ—‘ï¸ Anular Artefacto
          <span class="tooltip">No hay artefactos anulables</span>
        </button>
      </div>
      <div class="spec-note" style="margin-top:12px;">
        <b>UX:</b> Disabled buttons visibles pero <code>opacity: 0.4</code> + <code>cursor: not-allowed</code>. Tooltip con <code>disabled_reason</code> del backend aparece en hover.
      </div>
    </div>

    <!-- â•â• TIMELINE VARIANTES â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:20px;">Timeline â€” Todas las variantes de nodo</h3>
      <div style="display:flex;gap:20px;flex-wrap:wrap;align-items:center;margin-bottom:20px;">
        <div style="text-align:center;">
          <div class="timeline-node completed" style="margin:0 auto;">âœ“</div>
          <div style="font-size:11px;color:var(--text-secondary);margin-top:6px;">Completado</div>
        </div>
        <div style="text-align:center;">
          <div class="timeline-node current" style="margin:0 auto;">â—</div>
          <div style="font-size:11px;color:var(--text-secondary);margin-top:6px;">Actual (pulse)</div>
        </div>
        <div style="text-align:center;">
          <div class="timeline-node future" style="margin:0 auto;">5</div>
          <div style="font-size:11px;color:var(--text-secondary);margin-top:6px;">Futuro</div>
        </div>
        <div style="text-align:center;">
          <div class="timeline-node blocked" style="margin:0 auto;">!</div>
          <div style="font-size:11px;color:var(--text-secondary);margin-top:6px;">Bloqueado</div>
        </div>
      </div>

      <h3 style="font-size:14px;font-weight:700;margin-bottom:12px;">Timeline completa â€” Caso CERRADO (todo completado)</h3>
      <div class="timeline" style="margin-bottom:20px;">
        <div class="timeline-step"><div class="timeline-node completed">âœ“</div><div class="timeline-line completed"></div><div class="timeline-label">Registro</div><div class="timeline-days">2d</div></div>
        <div class="timeline-step"><div class="timeline-node completed">âœ“</div><div class="timeline-line completed"></div><div class="timeline-label">ProducciÃ³n</div><div class="timeline-days">15d</div></div>
        <div class="timeline-step"><div class="timeline-node completed">âœ“</div><div class="timeline-line completed"></div><div class="timeline-label">PreparaciÃ³n</div><div class="timeline-days">4d</div></div>
        <div class="timeline-step"><div class="timeline-node completed">âœ“</div><div class="timeline-line completed"></div><div class="timeline-label">TrÃ¡nsito</div><div class="timeline-days">22d</div></div>
        <div class="timeline-step"><div class="timeline-node completed">âœ“</div><div class="timeline-line completed"></div><div class="timeline-label">En Destino</div><div class="timeline-days">5d</div></div>
        <div class="timeline-step"><div class="timeline-node completed">âœ“</div><div class="timeline-line completed"></div><div class="timeline-label">Facturado</div><div class="timeline-days">3d</div></div>
        <div class="timeline-step"><div class="timeline-node completed">âœ“</div><div class="timeline-label">Cerrado</div><div class="timeline-days">51d total</div></div>
      </div>

      <h3 style="font-size:14px;font-weight:700;margin-bottom:12px;">Timeline â€” Caso REGISTRO (inicio, solo 1 paso)</h3>
      <div class="timeline">
        <div class="timeline-step"><div class="timeline-node current">â—</div><div class="timeline-line current"></div><div class="timeline-label">Registro</div><div class="timeline-days">0d</div></div>
        <div class="timeline-step"><div class="timeline-node future">2</div><div class="timeline-line future"></div><div class="timeline-label">ProducciÃ³n</div><div class="timeline-days">â€”</div></div>
        <div class="timeline-step"><div class="timeline-node future">3</div><div class="timeline-line future"></div><div class="timeline-label">PreparaciÃ³n</div><div class="timeline-days">â€”</div></div>
        <div class="timeline-step"><div class="timeline-node future">4</div><div class="timeline-line future"></div><div class="timeline-label">TrÃ¡nsito</div><div class="timeline-days">â€”</div></div>
        <div class="timeline-step"><div class="timeline-node future">5</div><div class="timeline-line future"></div><div class="timeline-label">En Destino</div><div class="timeline-days">â€”</div></div>
        <div class="timeline-step"><div class="timeline-node future">6</div><div class="timeline-line future"></div><div class="timeline-label">Facturado</div><div class="timeline-days">â€”</div></div>
        <div class="timeline-step"><div class="timeline-node future">7</div><div class="timeline-label">Cerrado</div><div class="timeline-days">â€”</div></div>
      </div>
    </div>

    <!-- â•â• ROW STATES â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;overflow:hidden;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:16px;">Tabla â€” Todos los row states</h3>
      <table class="data-table">
        <thead><tr><th>Ref</th><th>Estado</th><th>Row state</th><th>DÃ­as</th></tr></thead>
        <tbody>
          <tr>
            <td class="ref">EXP-2026-0051</td>
            <td><span class="badge badge-gray">Registro</span></td>
            <td style="font-size:11px;color:var(--text-tertiary)">Normal (zebra even)</td>
            <td><span class="credit-dot mint"></span> 12</td>
          </tr>
          <tr>
            <td class="ref">EXP-2026-0047</td>
            <td><span class="badge badge-mint">ProducciÃ³n</span></td>
            <td style="font-size:11px;color:var(--text-tertiary)">Normal (zebra odd)</td>
            <td><span class="credit-dot mint"></span> 45</td>
          </tr>
          <tr style="border-left:3px solid var(--mint);">
            <td class="ref">EXP-2026-0044</td>
            <td><span class="badge badge-mint">PreparaciÃ³n</span></td>
            <td style="font-size:11px;color:var(--mint);">Selected (border-left 3px Mint)</td>
            <td><span class="credit-dot amber"></span> 63</td>
          </tr>
          <tr class="blocked">
            <td class="ref">EXP-2026-0012</td>
            <td><span class="badge badge-navy">En TrÃ¡nsito</span></td>
            <td style="font-size:11px;color:var(--coral);">Blocked (border-right 3px Coral)</td>
            <td><span class="credit-dot coral"></span> 82</td>
          </tr>
          <tr class="blocked" style="border-left:3px solid var(--mint);">
            <td class="ref">EXP-2026-0019</td>
            <td><span class="badge badge-navy">En Destino</span></td>
            <td style="font-size:11px;color:var(--amber);">Dual: Selected + Blocked (ambos bordes)</td>
            <td><span class="credit-dot coral"></span> 78</td>
          </tr>
          <tr>
            <td class="ref">EXP-2026-0053</td>
            <td><span class="badge badge-success">Cerrado</span></td>
            <td style="font-size:11px;color:var(--text-tertiary)">Normal â€” crÃ©dito dash (no aplica)</td>
            <td><span style="color:var(--text-disabled)">â€”</span></td>
          </tr>
          <tr>
            <td class="ref">EXP-2026-0060</td>
            <td><span class="badge" style="background:#F3E8E8;color:#8B4C4C;">Cancelado</span></td>
            <td style="font-size:11px;color:var(--text-tertiary)">Normal â€” cancelado</td>
            <td><span style="color:var(--text-disabled)">â€”</span></td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- â•â• STAT CARDS â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:16px;">Stat cards â€” Variantes</h3>
      <div class="stat-grid">
        <div class="stat-card">
          <div class="label">Normal</div>
          <div class="value">47</div>
          <div class="sub">Navy default</div>
        </div>
        <div class="stat-card alert">
          <div class="label">Alert (coral)</div>
          <div class="value">8</div>
          <div class="sub">Cuando count > 0 en alertas/bloqueados</div>
        </div>
        <div class="stat-card warning">
          <div class="label">Warning (amber)</div>
          <div class="value">5</div>
          <div class="sub">Uso intermedio si aplica</div>
        </div>
        <div class="stat-card ok">
          <div class="label">Success (green)</div>
          <div class="value">0</div>
          <div class="sub">Cuando alertas = 0</div>
        </div>
      </div>
    </div>

    <!-- â•â• MODALES â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:16px;">Modales â€” Todos los tipos</h3>
      <div style="display:flex;gap:10px;flex-wrap:wrap;">
        <button class="btn btn-secondary btn-sm" onclick="showModal2('confirm')">Confirm simple</button>
        <button class="btn btn-secondary btn-sm" onclick="showModal2('block')">Block + reason</button>
        <button class="btn btn-secondary btn-sm" onclick="showModal2('cost')">Register Cost form</button>
        <button class="btn btn-secondary btn-sm" onclick="showModal2('supersede')">Artifact selector</button>
        <button class="btn btn-secondary btn-sm" onclick="showToast('error','')">Toast error</button>
        <button class="btn btn-secondary btn-sm" onclick="showToast('success','Costo registrado: Flete $2,400')">Toast success</button>
      </div>
    </div>

    <!-- â•â• EMPTY + LOADING + ERROR â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:16px;">Estados vacÃ­o / cargando / error</h3>

      <h4 style="font-size:12px;font-weight:700;color:var(--text-tertiary);margin-bottom:10px;text-transform:uppercase;">Empty state (0 resultados)</h4>
      <div style="text-align:center;padding:40px 20px;background:var(--bg-alt);border-radius:var(--radius-xl);margin-bottom:16px;">
        <div style="font-size:48px;opacity:.3;margin-bottom:8px;">ğŸ“</div>
        <div style="font-size:14px;font-weight:600;color:var(--text-secondary);">No hay expedientes que coincidan con los filtros</div>
        <div style="font-size:12px;color:var(--text-tertiary);margin-top:4px;">Intenta cambiar los filtros o crear un nuevo expediente</div>
      </div>

      <h4 style="font-size:12px;font-weight:700;color:var(--text-tertiary);margin-bottom:10px;text-transform:uppercase;">Loading skeleton (tabla)</h4>
      <div style="padding:16px;background:var(--bg-alt);border-radius:var(--radius-xl);margin-bottom:16px;">
        <div class="skeleton" style="height:14px;width:60%;margin-bottom:12px;"></div>
        <div class="skeleton" style="height:14px;width:80%;margin-bottom:12px;"></div>
        <div class="skeleton" style="height:14px;width:45%;margin-bottom:12px;"></div>
        <div class="skeleton" style="height:14px;width:70%;margin-bottom:12px;"></div>
        <div class="skeleton" style="height:14px;width:55%;"></div>
      </div>

      <h4 style="font-size:12px;font-weight:700;color:var(--text-tertiary);margin-bottom:10px;text-transform:uppercase;">Loading skeleton (stat cards)</h4>
      <div class="stat-grid">
        <div class="stat-card"><div class="skeleton" style="height:12px;width:60%;margin-bottom:8px;"></div><div class="skeleton" style="height:36px;width:40%;margin-bottom:6px;"></div><div class="skeleton" style="height:10px;width:50%;"></div></div>
        <div class="stat-card"><div class="skeleton" style="height:12px;width:50%;margin-bottom:8px;"></div><div class="skeleton" style="height:36px;width:30%;margin-bottom:6px;"></div><div class="skeleton" style="height:10px;width:65%;"></div></div>
        <div class="stat-card"><div class="skeleton" style="height:12px;width:55%;margin-bottom:8px;"></div><div class="skeleton" style="height:36px;width:35%;margin-bottom:6px;"></div><div class="skeleton" style="height:10px;width:45%;"></div></div>
        <div class="stat-card"><div class="skeleton" style="height:12px;width:70%;margin-bottom:8px;"></div><div class="skeleton" style="height:36px;width:50%;margin-bottom:6px;"></div><div class="skeleton" style="height:10px;width:40%;"></div></div>
      </div>

      <h4 style="font-size:12px;font-weight:700;color:var(--text-tertiary);margin:16px 0 10px;text-transform:uppercase;">Error state (API fail)</h4>
      <div style="text-align:center;padding:40px 20px;background:var(--coral-soft);border:1px dashed var(--coral);border-radius:var(--radius-xl);">
        <div style="font-size:48px;opacity:.5;margin-bottom:8px;">âš ï¸</div>
        <div style="font-size:14px;font-weight:600;color:var(--coral);">Error al cargar expedientes</div>
        <div style="font-size:12px;color:var(--text-secondary);margin-top:4px;">No se pudo conectar con el servidor. <a href="#" style="color:var(--navy);font-weight:600;">Reintentar</a></div>
      </div>
    </div>

    <!-- â•â• ARTEFACTO STATES â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;overflow:hidden;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:16px;">Artefactos â€” Todos los estados posibles</h3>
      <table class="data-table">
        <thead><tr><th>Tipo</th><th>Status</th><th>Detalle</th></tr></thead>
        <tbody>
          <tr><td>ART-01 Â· OC Cliente</td><td><span class="badge badge-success">Completado</span></td><td class="time">Normal</td></tr>
          <tr><td>ART-02 Â· Proforma</td><td><span class="badge badge-gray">Pendiente</span></td><td class="time">AÃºn no creado</td></tr>
          <tr><td>ART-05 Â· AWB/BL</td><td><span class="badge badge-mint">Activo</span></td><td class="time">En progreso</td></tr>
          <tr><td style="text-decoration:line-through;opacity:.6;">ART-02 Â· Proforma v1</td><td><span class="badge" style="background:#F8E8FF;color:#7B2DBF;">Superseded</span></td><td class="time">Reemplazado por â†’ <a href="#" style="color:var(--navy);font-weight:600;">Proforma v2</a></td></tr>
          <tr><td style="text-decoration:line-through;opacity:.6;">ART-09 Â· Factura MWT</td><td><span class="badge" style="background:var(--coral-soft);color:var(--coral);">Void</span></td><td class="time">Anulado â€” motivo: error en monto</td></tr>
        </tbody>
      </table>
    </div>

    <!-- â•â• TOASTS â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:16px;">Toasts â€” Variantes (posiciÃ³n fija bottom-right)</h3>
      <div style="display:flex;gap:16px;flex-wrap:wrap;">
        <div style="padding:14px 20px;border-radius:var(--radius-xl);font-size:13px;font-weight:600;background:var(--mint);color:var(--navy);display:flex;align-items:center;gap:8px;">âœ… ProducciÃ³n confirmada â€” avanzando a PreparaciÃ³n</div>
        <div style="padding:14px 20px;border-radius:var(--radius-xl);font-size:13px;font-weight:600;background:var(--coral);color:white;display:flex;align-items:center;gap:8px;">âŒ Error: no se pudo bloquear â€” motivo requerido</div>
        <div style="padding:14px 20px;border-radius:var(--radius-xl);font-size:13px;font-weight:600;background:var(--mint);color:var(--navy);display:flex;align-items:center;gap:8px;">âœ… Costo registrado: Flete marÃ­timo $2,400</div>
        <div style="padding:14px 20px;border-radius:var(--radius-xl);font-size:13px;font-weight:600;background:var(--mint);color:var(--navy);display:flex;align-items:center;gap:8px;">âœ… Expediente desbloqueado correctamente</div>
        <div style="padding:14px 20px;border-radius:var(--radius-xl);font-size:13px;font-weight:600;background:var(--coral);color:white;display:flex;align-items:center;gap:8px;">âŒ Error 500: contactar soporte</div>
      </div>
    </div>

    <!-- â•â• INPUT VARIANTS â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:16px;">Inputs â€” Estados</h3>
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;">
        <div>
          <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Default</label>
          <input type="text" placeholder="Placeholder text" style="width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:14px;color:var(--text-primary);background:var(--surface);">
        </div>
        <div>
          <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Focused</label>
          <input type="text" value="Flete marÃ­timo" style="width:100%;padding:10px 14px;border:1.5px solid var(--mint);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:14px;color:var(--text-primary);background:var(--surface);box-shadow:0 0 0 3px var(--mint-soft);">
        </div>
        <div>
          <label style="display:block;font-size:12px;font-weight:600;color:var(--coral);margin-bottom:6px;">Error</label>
          <input type="text" value="" style="width:100%;padding:10px 14px;border:1.5px solid var(--coral);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:14px;color:var(--text-primary);background:var(--surface);box-shadow:0 0 0 3px var(--coral-soft);">
          <span style="font-size:11px;color:var(--coral);margin-top:4px;display:block;">Campo requerido</span>
        </div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-top:16px;">
        <div>
          <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Number input</label>
          <input type="number" value="2400.00" style="width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--radius-lg);font-family:var(--font-mono);font-size:14px;color:var(--text-primary);background:var(--surface);font-variant-numeric:tabular-nums;">
        </div>
        <div>
          <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Select / dropdown</label>
          <select class="filter-select" style="width:100%;padding:10px 14px;">
            <option>Seleccionar categorÃ­a...</option>
            <option>product</option>
            <option>freight</option>
            <option>insurance</option>
            <option>customs</option>
            <option>handling</option>
          </select>
        </div>
        <div>
          <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Textarea (reason)</label>
          <textarea style="width:100%;min-height:60px;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:13px;resize:vertical;background:var(--surface);color:var(--text-primary);" placeholder="Motivo del bloqueo..."></textarea>
        </div>
      </div>
    </div>

    <!-- â•â• TYPOGRAPHY QUICK REF â•â• -->
    <div style="background:var(--surface);border-radius:var(--radius-xl);padding:24px;box-shadow:var(--shadow-sm);border:1px solid var(--border);margin-bottom:20px;">
      <h3 style="font-size:14px;font-weight:700;margin-bottom:16px;">TipografÃ­a â€” Quick ref</h3>
      <div style="margin-bottom:12px;font-family:var(--font-display);font-size:36px;font-weight:800;letter-spacing:-1.5px;">display-xl: 36/800 (stat cards)</div>
      <div style="margin-bottom:12px;font-family:var(--font-display);font-size:24px;font-weight:800;letter-spacing:-0.5px;">display-lg: 24/800 (ref-big)</div>
      <div style="margin-bottom:12px;font-family:var(--font-display);font-size:18px;font-weight:700;">display-md: 18/700 (modal titles)</div>
      <div style="margin-bottom:12px;font-family:var(--font-body);font-size:15px;font-weight:700;">heading: 15/700 (main-header)</div>
      <div style="margin-bottom:12px;font-family:var(--font-body);font-size:14px;font-weight:500;">body: 14/500 (default text)</div>
      <div style="margin-bottom:12px;font-family:var(--font-body);font-size:13px;font-weight:600;">body-sm: 13/600 (table cells, buttons)</div>
      <div style="margin-bottom:12px;font-family:var(--font-body);font-size:12px;color:var(--text-tertiary);">caption: 12 (timestamps, pagination)</div>
      <div style="margin-bottom:12px;font-family:var(--font-body);font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:var(--text-tertiary);">micro: 11/700/UPPER (labels, section heads)</div>
      <div style="font-family:var(--font-mono);font-size:12px;font-weight:600;color:var(--navy);">EXP-2026-0047 â€” mono: 12/600 (refs, cÃ³digos)</div>
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MODAL: CONFIRM ACTION (Block/Unblock example)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="modal">
  <div class="modal">
    <h3>â›” Desbloquear expediente</h3>
    <p>Â¿Confirmar desbloqueo de <strong>EXP-2026-0012</strong>? El expediente podrÃ¡ avanzar de estado nuevamente.</p>
    <div class="modal-actions">
      <button class="btn btn-secondary" onclick="hideModal()">Cancelar</button>
      <button class="btn btn-primary" onclick="hideModal();showToast('success','Expediente desbloqueado correctamente')">Confirmar desbloqueo</button>
    </div>
  </div>
</div>

<!-- MODAL: Confirm simple (pipeline transition) -->
<div class="modal-overlay" id="modal-confirm">
  <div class="modal">
    <h3>âš¡ Confirmar ProducciÃ³n</h3>
    <p>Â¿Confirmar producciÃ³n para <strong>EXP-2026-0047</strong>? El estado avanzarÃ¡ a <strong>PreparaciÃ³n</strong>.</p>
    <div style="background:var(--bg-alt);border-radius:var(--radius-lg);padding:12px 16px;margin-bottom:16px;font-size:12px;">
      <div style="display:flex;justify-content:space-between;margin-bottom:4px;"><span style="color:var(--text-tertiary);">Comando:</span> <span style="font-family:var(--font-mono);font-weight:600;">C08</span></div>
      <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-tertiary);">Tipo:</span> <span>PIPELINE Â· PRIMARY</span></div>
    </div>
    <div class="modal-actions">
      <button class="btn btn-secondary" onclick="hideAllModals()">Cancelar</button>
      <button class="btn btn-primary" onclick="hideAllModals();showToast('success','ProducciÃ³n confirmada â†’ PreparaciÃ³n')">Confirmar</button>
    </div>
  </div>
</div>

<!-- MODAL: Block con reason (requires_reason: true) -->
<div class="modal-overlay" id="modal-block">
  <div class="modal">
    <h3>ğŸ”’ Bloquear expediente</h3>
    <p>El expediente <strong>EXP-2026-0047</strong> serÃ¡ bloqueado y no podrÃ¡ avanzar de estado hasta ser desbloqueado.</p>
    <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Motivo del bloqueo *</label>
    <textarea placeholder="Ej: CrÃ©dito excedido dÃ­a 75, pendiente pago factura PI-2026-0047..." style="width:100%;min-height:80px;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:13px;resize:vertical;margin-bottom:4px;background:var(--surface);color:var(--text-primary);"></textarea>
    <div style="font-size:11px;color:var(--text-tertiary);margin-bottom:16px;">Este motivo se registra en el timeline del expediente y es visible para el CEO.</div>
    <div class="modal-actions">
      <button class="btn btn-secondary" onclick="hideAllModals()">Cancelar</button>
      <button class="btn btn-danger" onclick="hideAllModals();showToast('success','Expediente bloqueado â€” motivo registrado')">ğŸ”’ Bloquear</button>
    </div>
  </div>
</div>

<!-- MODAL: Register Cost (C15, fields: name, amount, currency, category) -->
<div class="modal-overlay" id="modal-cost">
  <div class="modal" style="width:480px;">
    <h3>ğŸ’° Registrar costo</h3>
    <p>Agregar lÃ­nea de costo a <strong>EXP-2026-0047</strong></p>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
      <div style="grid-column:1/-1;">
        <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Concepto *</label>
        <input type="text" placeholder="Ej: Flete marÃ­timo COSCO" style="width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:14px;color:var(--text-primary);background:var(--surface);">
      </div>
      <div>
        <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Monto *</label>
        <input type="number" placeholder="0.00" style="width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--radius-lg);font-family:var(--font-mono);font-size:14px;color:var(--text-primary);background:var(--surface);font-variant-numeric:tabular-nums;">
      </div>
      <div>
        <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Moneda *</label>
        <select style="width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:13px;color:var(--text-secondary);background:var(--surface);cursor:pointer;">
          <option selected>USD</option>
          <option>CRC</option>
          <option>BRL</option>
          <option>EUR</option>
        </select>
      </div>
      <div style="grid-column:1/-1;">
        <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">CategorÃ­a *</label>
        <select style="width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:13px;color:var(--text-secondary);background:var(--surface);cursor:pointer;">
          <option value="">Seleccionar...</option>
          <option>product</option>
          <option>freight</option>
          <option>insurance</option>
          <option>customs</option>
          <option>handling</option>
          <option>storage</option>
          <option>other</option>
        </select>
      </div>
    </div>
    <div style="font-size:11px;color:var(--text-tertiary);margin-top:12px;margin-bottom:16px;">Todos los campos son obligatorios. El costo se agregarÃ¡ como cost_line al expediente.</div>
    <div class="modal-actions">
      <button class="btn btn-secondary" onclick="hideAllModals()">Cancelar</button>
      <button class="btn btn-primary" onclick="hideAllModals();showToast('success','Costo registrado: nueva lÃ­nea agregada')">ğŸ’° Registrar</button>
    </div>
  </div>
</div>

<!-- MODAL: Artifact selector (C19 Supersede â€” COMPLETED_SAME_TYPE) -->
<div class="modal-overlay" id="modal-supersede">
  <div class="modal" style="width:480px;">
    <h3>ğŸ”„ Corregir artefacto (Supersede)</h3>
    <p>Seleccionar el artefacto completado que serÃ¡ reemplazado. Se crearÃ¡ una nueva versiÃ³n y el anterior quedarÃ¡ marcado como <span class="badge" style="background:#F8E8FF;color:#7B2DBF;font-size:10px;">Superseded</span>.</p>
    <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Artefacto a corregir *</label>
    <select style="width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:13px;color:var(--text-secondary);background:var(--surface);cursor:pointer;margin-bottom:4px;">
      <option value="">Seleccionar artefacto...</option>
      <option>ART-01 Â· OC Cliente â€” Completado 10 Ene</option>
      <option>ART-02 Â· Proforma â€” Completado 12 Ene</option>
    </select>
    <div style="font-size:11px;color:var(--text-tertiary);margin-bottom:12px;">Solo muestra artefactos con status <code style="font-family:var(--font-mono);font-size:10px;background:rgba(0,0,0,.06);padding:1px 5px;border-radius:3px;">COMPLETED</code> del mismo tipo (<code style="font-family:var(--font-mono);font-size:10px;background:rgba(0,0,0,.06);padding:1px 5px;border-radius:3px;">artifact_selector: COMPLETED_SAME_TYPE</code>)</div>
    <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Motivo de correcciÃ³n</label>
    <textarea placeholder="Ej: Error en precio unitario lÃ­nea 3" style="width:100%;min-height:60px;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:13px;resize:vertical;margin-bottom:16px;background:var(--surface);color:var(--text-primary);"></textarea>
    <div class="modal-actions">
      <button class="btn btn-secondary" onclick="hideAllModals()">Cancelar</button>
      <button class="btn btn-danger" onclick="hideAllModals();showToast('success','Artefacto superseded â€” nueva versiÃ³n creada')">ğŸ”„ Corregir</button>
    </div>
  </div>
</div>

<!-- MODAL: Void artifact (C20 â€” VOIDABLE_ONLY) -->
<div class="modal-overlay" id="modal-void">
  <div class="modal" style="width:480px;">
    <h3>ğŸ—‘ï¸ Anular artefacto (Void)</h3>
    <p>El artefacto seleccionado serÃ¡ anulado permanentemente. Esta acciÃ³n no se puede revertir.</p>
    <label style="display:block;font-size:12px;font-weight:600;color:var(--text-secondary);margin-bottom:6px;">Artefacto a anular *</label>
    <select style="width:100%;padding:10px 14px;border:1.5px solid var(--border);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:13px;color:var(--text-secondary);background:var(--surface);cursor:pointer;margin-bottom:4px;">
      <option value="">Seleccionar artefacto...</option>
      <option>ART-09 Â· Factura MWT â€” Completado 18 Feb</option>
    </select>
    <div style="font-size:11px;color:var(--text-tertiary);margin-bottom:12px;">Solo muestra artefactos con status <code style="font-family:var(--font-mono);font-size:10px;background:rgba(0,0,0,.06);padding:1px 5px;border-radius:3px;">COMPLETED</code> que son anulables (<code style="font-family:var(--font-mono);font-size:10px;background:rgba(0,0,0,.06);padding:1px 5px;border-radius:3px;">artifact_selector: VOIDABLE_ONLY</code>)</div>
    <label style="display:block;font-size:12px;font-weight:600;color:var(--coral);margin-bottom:6px;">Motivo de anulaciÃ³n * (irreversible)</label>
    <textarea placeholder="Ej: Factura duplicada, se anulÃ³ y se re-emitirÃ¡" style="width:100%;min-height:60px;padding:10px 14px;border:1.5px solid var(--coral);border-radius:var(--radius-lg);font-family:var(--font-body);font-size:13px;resize:vertical;margin-bottom:16px;background:var(--surface);color:var(--text-primary);box-shadow:0 0 0 3px var(--coral-soft);"></textarea>
    <div class="modal-actions">
      <button class="btn btn-secondary" onclick="hideAllModals()">Cancelar</button>
      <button class="btn btn-danger" onclick="hideAllModals();showToast('success','Artefacto anulado permanentemente')">ğŸ—‘ï¸ Anular</button>
    </div>
  </div>
</div>

<!-- Toast -->
<div class="toast-demo toast-success" id="toast-success">âœ… <span id="toast-text"></span></div>
<div class="toast-demo toast-error" id="toast-error">âŒ Error: no se pudo ejecutar la acciÃ³n â€” verifique los campos</div>

<script>
function toggleTheme() {
  const html = document.documentElement;
  const btn = document.getElementById('theme-toggle');
  if (html.getAttribute('data-theme') === 'light') {
    html.setAttribute('data-theme', 'dark');
    btn.textContent = 'â˜€ï¸ Light';
  } else {
    html.setAttribute('data-theme', 'light');
    btn.textContent = 'ğŸŒ™ Dark';
  }
}

function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById('screen-' + id).classList.add('active');
  document.querySelectorAll('.spec-nav button').forEach(b => b.classList.remove('active'));
  const labels = { login: 'â‘ ', dashboard: 'â‘¡', list: 'â‘¢', detail: 'â‘£', detail2: 'â‘¤', catalog: 'â‘¥' };
  document.querySelectorAll('.spec-nav button').forEach(b => {
    if (b.textContent.includes(labels[id])) b.classList.add('active');
  });
  window.scrollTo(0, 0);
}

function showModal() {
  document.getElementById('modal').classList.add('show');
}
function hideModal() {
  document.getElementById('modal').classList.remove('show');
}

function showModal2(type) {
  hideAllModals();
  const el = document.getElementById('modal-' + type);
  if (el) el.classList.add('show');
}

function hideAllModals() {
  document.querySelectorAll('.modal-overlay').forEach(m => m.classList.remove('show'));
}

function showToast(type, text) {
  // Hide any existing toasts first
  document.querySelectorAll('.toast-demo').forEach(t => t.style.display = 'none');
  const t = document.getElementById('toast-' + type);
  if (type === 'success' && text) document.getElementById('toast-text').textContent = text;
  t.style.display = 'flex';
  setTimeout(() => { t.style.display = 'none'; }, 4000);
}

// Close any modal on overlay click
document.querySelectorAll('.modal-overlay').forEach(overlay => {
  overlay.addEventListener('click', function(e) {
    if (e.target === this) hideAllModals();
  });
});

// ESC key closes modals
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') hideAllModals();
});
</script>
</body>
</html>
